<app-navbar></app-navbar>
<div class="container mt-4">
  <h4 class="mb-3"> ðŸ“‹ Voice Enrollment Report</h4>

  <!-- Date Filters -->
  <div class="row mb-4">
    <div class="col-md-3">
      <label>Start Date</label>
      <input type="date" class="form-control" [(ngModel)]="startDate">
    </div>
    <div class="col-md-3">
      <label>End Date</label>
      <input type="date" class="form-control" [(ngModel)]="endDate">
    </div>
    <div class="col-md-3 d-flex align-items-end">
      <button class="btn btn-primary w-100" (click)="filterByDate()">Submit</button>
    </div>
    <div class="col-md-3 d-flex align-items-end gap-2">
      <button class="btn btn-success w-100" (click)="exportToExcel()">Export to Excel</button>
      <button class="btn btn-outline-primary w-100" (click)="exportToCSV()">Export to CSV</button>
    </div>
  </div>

  <!-- Rows per page filter -->
  <div class="row mb-3">
    <div class="col-md-2">
      <label>Rows per page</label>
      <select class="form-control" [(ngModel)]="pageSize" (change)="onPageChange(1)">
        <option *ngFor="let size of pageSizeOptions" [value]="size">{{ size }}</option>
      </select>
    </div>
  </div>

  <!-- Data Table -->
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>S.No</th>
        <th>Date with Time</th>
        <th>Customer ID</th>
        <th>Unique ID</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of paginatedData(); let i = index">
        <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <td>{{ item.date | date: 'dd-MM-yyyy hh:mm a' }}</td>
        <td>{{ item.customerId }}</td>
        <td>{{ item.uniqueId }}</td>
        <td>
          <span [ngClass]="{
            'badge bg-success': item.status === 'Success',
            'badge bg-danger': item.status === 'Not Sufficient Voice Data'
          }">
            {{ item.status }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <nav *ngIf="filteredData.length > pageSize">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="onPageChange(currentPage - 1)">Previous</a>
      </li>

      <li class="page-item" 
          *ngFor="let page of totalPagesArray()" 
          [class.active]="page === currentPage">
        <a class="page-link" (click)="onPageChange(page)">{{ page }}</a>
      </li>

      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="onPageChange(currentPage + 1)">Next</a>
      </li>
    </ul>
  </nav>
</div>

<app-footer></app-footer>
